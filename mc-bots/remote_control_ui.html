<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CCCPCCC Control Console</title>
  <link rel="stylesheet" href="/remote_control_ui.css" />
</head>
<body>
  <div class="shell">
    <header class="main-header">
      <div class="title-block">
        <h1>CrayCon Creepers Central Production Command&Control Center (CCCPCCC)</h1>
        <div class="subtitle">Authorized Operators Only â€¢ Productivity Above All</div>
      </div>
      <div class="header-actions">
        <button id="layout-button" class="icon-button" aria-expanded="false" aria-controls="layout-panel" title="Layout">
          &#9881;
        </button>
        <div id="layout-panel" class="panel is-hidden">
          <div class="panel-title">Add Cards</div>
          <div id="hidden-cards-list" class="panel-list"></div>
        </div>
      </div>
    </header>

    <div id="card-grid" class="grid">
      <div class="card" data-card-id="connection" data-card-title="Connection">
        <div class="card-head" draggable="true">
          <h3>Connection</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Control Server URL</label>
          <input id="server-url" placeholder="ws://host:4000" />
          <label>Auth Token (optional for localhost)</label>
          <input id="token" placeholder="BOT_AUTH_TOKEN" />
          <label>Viewer Host Override (optional)</label>
          <input id="viewer-host" placeholder="cam.craycon.no" />
          <div class="row">
            <button id="connect">Connect</button>
            <button id="disconnect" class="secondary">Disconnect</button>
          </div>
          <p id="status">Disconnected</p>
          <p class="hint">Tip: use http(s) or ws(s) URLs. Token is sent as <code>?token=</code>.</p>
        </div>
      </div>

      <div class="card" data-card-id="bots" data-card-title="Bots">
        <div class="card-head" draggable="true">
          <h3>Bots</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Active Bot</label>
          <select id="bot-select"></select>
          <label>Spawn Bot (username)</label>
          <input id="spawn-name" placeholder="bot_username" />
          <button id="spawn">Spawn</button>
          
          <hr style="margin: 16px 0; border: none; border-top: 1px solid #2a2f3d;" />
          
          <label>Bulk Spawn Farmers</label>
          <select id="bulk-job-type">
            <option value="farmer-wheat">Wheat Farmers</option>
            <option value="farmer-potatoes">Potato Farmers</option>
            <option value="farmer-beets">Beet Farmers</option>
            <option value="farmer-carrots">Carrot Farmers</option>
          </select>
          <label>Count</label>
          <input id="bulk-count" type="number" min="1" max="10" value="3" />
          <button id="bulk-spawn">Bulk Spawn</button>
          
          <p id="bot-status">No bots connected</p>
        </div>
      </div>

      <div class="card" data-card-id="jobs" data-card-title="Jobs">
        <div class="card-head" draggable="true">
          <h3>Jobs</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Bot</label>
          <select id="job-bot-select"></select>
          <label>Job</label>
          <select id="job-select"></select>
          <label>Job Options (JSON)</label>
          <input id="job-options" placeholder='{"radius":8}' />
          <button id="job-start">Start Job</button>
          <button id="job-stop" class="secondary">Stop Job</button>
        </div>
      </div>

      <div class="card" data-card-id="work-area" data-card-title="Work Area">
        <div class="card-head" draggable="true">
          <h3>Work Area</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Anchor Override (X,Y,Z)</label>
          <input id="work-area-input" placeholder="123,64,-45" />
          <div class="row">
            <button id="work-area-apply">Apply</button>
            <button id="work-area-clear" class="secondary">Clear</button>
          </div>
          <p id="work-area-status" class="hint">Using brigadier location.</p>
          <p class="hint">Applies instantly to all active farmer bots.</p>
        </div>
      </div>

      <div class="card" data-card-id="move" data-card-title="Move To">
        <div class="card-head" draggable="true">
          <h3>Move To</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <div class="row">
            <div><label>X</label><input id="move-x" value="0" /></div>
            <div><label>Y</label><input id="move-y" value="0" /></div>
            <div><label>Z</label><input id="move-z" value="0" /></div>
          </div>
          <button id="move">Move</button>
        </div>
      </div>

      <div class="card" data-card-id="follow" data-card-title="Follow Player">
        <div class="card-head" draggable="true">
          <h3>Follow Player</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Player Name</label>
          <input id="follow-name" placeholder="Player name" />
          <label>Distance</label>
          <input id="follow-distance" value="3" />
          <button id="follow">Follow</button>
          <button id="stop" class="secondary">Stop</button>
        </div>
      </div>

      <div class="card" data-card-id="telemetry" data-card-title="Telemetry">
        <div class="card-head" draggable="true">
          <h3>Telemetry</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body fill">
          <pre id="telemetry">Waiting...</pre>
        </div>
        <div class="resize-handle" data-resize-handle aria-hidden="true"></div>
      </div>

      <div class="card" data-card-id="performance" data-card-title="Performance">
        <div class="card-head" draggable="true">
          <h3>Performance</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body fill">
          <div id="performance-summary" class="perf-summary">Waiting for telemetry...</div>
          <pre id="performance">Waiting...</pre>
        </div>
        <div class="resize-handle" data-resize-handle aria-hidden="true"></div>
      </div>

      <div class="card" data-card-id="viewer-controls" data-card-title="Viewer Controls">
        <div class="card-head" draggable="true">
          <h3>Viewer Controls</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>Enable Viewer Control Layer</label>
          <button id="toggle-controls" class="secondary">Disable</button>
          <label>Viewer Iframe Control Mode</label>
          <button id="toggle-viewer-control" class="secondary">Enable</button>
          <label>Look Sensitivity</label>
          <input id="look-sensitivity" value="0.0025" />
          <p style="font-size: 12px; color: #aab0c0;">
            Right click + drag to look. WASD to move, Space to jump, Shift to sprint.
          </p>
          <p style="font-size: 12px; color: #aab0c0;">
            Iframe control mode adds ?control=true to the viewer URL. Click inside the viewer to lock the pointer.
          </p>
        </div>
      </div>

      <div class="card" data-card-id="mindcraft" data-card-title="Mindcraft LLM">
        <div class="card-head" draggable="true">
          <h3>Mindcraft LLM</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body">
          <label>MindServer Host</label>
          <input id="mindcraft-host" value="localhost" />
          <label>MindServer Port</label>
          <input id="mindcraft-port" value="8080" />
          <button id="mindcraft-connect" class="secondary">Connect</button>
          <label>Profile</label>
          <select id="mindcraft-profile"></select>
          <button id="mindcraft-create">Create LLM Bot</button>
          <details>
            <summary>Advanced</summary>
            <div class="accordion-body">
              <label>Agent Name</label>
              <input id="mindcraft-name" placeholder="llm_bot" />
              <label>Auth</label>
              <select id="mindcraft-auth">
                <option value="offline">offline</option>
                <option value="microsoft">microsoft</option>
              </select>
              <label>Base Profile</label>
              <select id="mindcraft-base">
                <option value="survival">survival</option>
                <option value="assistant">assistant</option>
                <option value="creative">creative</option>
                <option value="god_mode">god_mode</option>
              </select>
              <label>Init Message</label>
              <input id="mindcraft-init" value="Respond with hello world and your name" />
              <label>Existing Agents</label>
              <select id="mindcraft-agent"></select>
              <div class="row">
                <button id="mindcraft-start">Start</button>
                <button id="mindcraft-stop" class="secondary">Stop</button>
                <button id="mindcraft-destroy" class="secondary">Destroy</button>
              </div>
              <p id="mindcraft-status" style="font-size: 12px; color: #aab0c0;">Mindcraft: disconnected</p>
            </div>
          </details>
        </div>
      </div>

      <div class="card" data-card-id="viewer" data-card-title="Viewer">
        <div class="card-head" draggable="true">
          <h3>Viewer</h3>
          <div class="card-actions">
            <button class="card-action" data-card-action="minimize" aria-label="Minimize">-</button>
            <button class="card-action" data-card-action="close" aria-label="Close">x</button>
          </div>
        </div>
        <div class="card-body fill">
          <div class="viewer-wrap">
            <iframe id="viewer" title="Prismarine Viewer"></iframe>
            <div id="viewer-overlay" class="viewer-overlay">
              <div class="viewer-hint">Viewer controls enabled. Right click + drag to look. WASD/Space/Shift to move.</div>
            </div>
          </div>
        </div>
        <div class="resize-handle" data-resize-handle aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <script src="/remote_control_ui.js" defer></script>
</body>
</html>
